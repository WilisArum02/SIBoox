-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.buku
(
    isbn character varying COLLATE pg_catalog."default" NOT NULL,
    judul character varying COLLATE pg_catalog."default",
    pengarang character varying COLLATE pg_catalog."default",
    penerbit character varying COLLATE pg_catalog."default",
    tahun character varying COLLATE pg_catalog."default",
    jumlah_halaman character varying COLLATE pg_catalog."default",
    id_kategori character varying COLLATE pg_catalog."default",
    CONSTRAINT "Buku_pkey" PRIMARY KEY (isbn)
);

CREATE TABLE IF NOT EXISTS public.kategori
(
    id_kategori character varying COLLATE pg_catalog."default" NOT NULL,
    nama character varying COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT kategori_pkey PRIMARY KEY (id_kategori)
);

CREATE TABLE IF NOT EXISTS public.login
(
    nomerinduk character varying COLLATE pg_catalog."default" NOT NULL,
    password character varying COLLATE pg_catalog."default",
    nama character varying COLLATE pg_catalog."default",
    level character varying COLLATE pg_catalog."default",
    CONSTRAINT login_pkey PRIMARY KEY (nomerinduk)
);

CREATE TABLE IF NOT EXISTS public.peminjaman
(
    id_peminjaman character varying COLLATE pg_catalog."default" NOT NULL,
    nim character varying COLLATE pg_catalog."default",
    nama character varying COLLATE pg_catalog."default",
    prodi character varying COLLATE pg_catalog."default",
    angkatan character varying COLLATE pg_catalog."default",
    isbn character varying COLLATE pg_catalog."default",
    tanggal_peminjaman date,
    tanggal_pengembalian date,
    CONSTRAINT peminjaman_pkey PRIMARY KEY (id_peminjaman)
);

CREATE TABLE IF NOT EXISTS public.peminjamanskripsi
(
    id_peminjaman character varying COLLATE pg_catalog."default" NOT NULL,
    nim character varying COLLATE pg_catalog."default",
    nama character varying COLLATE pg_catalog."default",
    prodi character varying COLLATE pg_catalog."default",
    angkatan character varying COLLATE pg_catalog."default",
    id_skripsi character varying COLLATE pg_catalog."default",
    tanggal_peminjaman date,
    tanggal_pengembalian date,
    CONSTRAINT peminjamanskripsi_pkey PRIMARY KEY (id_peminjaman)
);

CREATE TABLE IF NOT EXISTS public.skripsi
(
    id_skripsi character varying COLLATE pg_catalog."default" NOT NULL,
    judul character varying COLLATE pg_catalog."default",
    pengarang character varying COLLATE pg_catalog."default",
    tahun character varying COLLATE pg_catalog."default",
    jumlah_halaman character varying COLLATE pg_catalog."default",
    CONSTRAINT "Skripsi_pkey" PRIMARY KEY (id_skripsi)
);

ALTER TABLE IF EXISTS public.buku
    ADD CONSTRAINT kategori_fkey FOREIGN KEY (id_kategori)
    REFERENCES public.kategori (id_kategori) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.peminjaman
    ADD CONSTRAINT isbn_fkey FOREIGN KEY (isbn)
    REFERENCES public.buku (isbn) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.peminjamanskripsi
    ADD CONSTRAINT id_skripsi_fkey FOREIGN KEY (id_skripsi)
    REFERENCES public.skripsi (id_skripsi) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;